# 📧 邮件通知配置指南

## 快速配置

系统已内置常见邮箱服务商的配置模板，点击即可自动填充：

### 支持的邮箱服务商

| 邮箱 | SMTP 服务器 | 端口 | 加密方式 | 特别说明 |
|------|-------------|------|----------|----------|
| **QQ邮箱** | smtp.qq.com | 587 | TLS | 需使用授权码，不是QQ密码 |
| **163邮箱** | smtp.163.com | 465 | SSL | 需使用授权码 |
| **126邮箱** | smtp.126.com | 465 | SSL | 需使用授权码 |
| **Gmail** | smtp.gmail.com | 587 | TLS | 需开启两步验证并使用应用专用密码 |
| **Outlook** | smtp.office365.com | 587 | TLS | 使用账号密码即可 |
| **新浪邮箱** | smtp.sina.com | 465 | SSL | 使用账号密码 |

---

## 🔧 详细配置步骤

### 1. QQ 邮箱配置（推荐）

#### 获取授权码：
1. 登录 QQ 邮箱网页版：https://mail.qq.com
2. 点击右上角 **设置** → **账户**
3. 找到 **POP3/IMAP/SMTP/Exchange/CardDAV/CalDAV服务**
4. 开启 **IMAP/SMTP服务**
5. 点击 **生成授权码**，按照提示完成验证
6. 保存生成的授权码（16位字母，例如：abcdefghijklmnop）

#### 填写配置：
- **SMTP 服务器**：`smtp.qq.com`
- **端口**：`587`
- **加密方式**：`TLS`
- **邮箱账号**：你的QQ邮箱（例如：123456789@qq.com）
- **密码**：刚才生成的16位授权码（不是QQ密码！）

---

### 2. 163/126 邮箱配置

#### 获取授权码：
1. 登录网易邮箱网页版
2. 点击 **设置** → **POP3/SMTP/IMAP**
3. 开启 **IMAP/SMTP服务**
4. 点击 **客户端授权密码** → **新增授权密码**
5. 按照提示获取授权码

#### 填写配置：
- **SMTP 服务器**：`smtp.163.com` 或 `smtp.126.com`
- **端口**：`465`
- **加密方式**：`SSL`
- **邮箱账号**：你的邮箱地址
- **密码**：授权码（不是登录密码！）

---

### 3. Gmail 配置

#### 开启应用专用密码：
1. 登录 Google 账户：https://myaccount.google.com
2. 点击 **安全性**
3. 开启 **两步验证**（如果还没开启）
4. 找到 **应用专用密码** → **选择应用**：邮件
5. 生成密码并保存

#### 填写配置：
- **SMTP 服务器**：`smtp.gmail.com`
- **端口**：`587`
- **加密方式**：`TLS`
- **邮箱账号**：你的 Gmail 地址
- **密码**：应用专用密码

---

## ⚠️ 常见错误及解决方案

### 错误1："Connection unexpectedly closed"

**原因**：端口和加密方式不匹配

**解决方案**：
- 端口 **587** 必须使用 **TLS** 加密
- 端口 **465** 必须使用 **SSL** 加密
- 使用快速配置模板可自动正确配置

### 错误2："认证失败：用户名或密码错误"

**原因**：
- QQ/163/126 邮箱使用了登录密码而不是授权码
- Gmail 没有使用应用专用密码

**解决方案**：
- QQ/网易邮箱：使用授权码（不是登录密码）
- Gmail：使用应用专用密码

### 错误3："连接失败：无法连接到SMTP服务器"

**原因**：
- 服务器地址错误
- 防火墙阻止连接
- 网络问题

**解决方案**：
- 检查 SMTP 服务器地址是否正确
- 确保服务器能访问外网
- 检查防火墙设置

---

## 🧪 测试配置

配置完成后，强烈建议点击 **测试配置** 按钮：

1. 系统会发送一封测试邮件到您的邮箱
2. 如果收到邮件，说明配置成功
3. 如果失败，会显示详细的错误信息

---

## 💡 最佳实践

### 推荐配置方案

**最简单**：使用 Outlook/Hotmail
- 直接使用账号密码，无需授权码
- 配置最简单

**最稳定**：使用 QQ 邮箱
- 国内网络稳定
- 配置简单（仅需授权码）
- 发送速度快

**最专业**：使用 Gmail
- 安全性最高
- 国际通用
- 需要能访问 Google 服务

---

## 📝 配置示例

### QQ 邮箱完整示例：

```
SMTP 服务器：smtp.qq.com
端口：587
加密方式：TLS
邮箱账号：123456789@qq.com
密码：abcdefghijklmnop (授权码)
发件人名称：GPU 服务器通知 (可选)
```

### 163 邮箱完整示例：

```
SMTP 服务器：smtp.163.com
端口：465
加密方式：SSL
邮箱账号：username@163.com
密码：YOUR_AUTH_CODE (授权码)
发件人名称：服务器管理员 (可选)
```

---

## 🚀 使用建议

1. **首次配置**：建议使用 QQ 邮箱或 163 邮箱（国内用户）
2. **点击快速配置**：自动填充正确的服务器和端口
3. **仔细获取授权码**：QQ/163/126 必须使用授权码
4. **务必测试**：保存前先点击"测试配置"验证
5. **查看错误信息**：如果失败，仔细阅读错误提示

---

## 🔒 安全提示

- ✅ 配置信息保存在本地 `data/smtp_config.json`
- ✅ 密码已加密存储
- ✅ 不会上传到 GitHub 仓库
- ✅ 只在发送邮件时使用
- ⚠️ 请妥善保管配置文件

---

## 📞 获取帮助

如果遇到问题：

1. 查看上方"常见错误及解决方案"
2. 检查邮箱服务商的 SMTP 设置页面
3. 使用"测试配置"功能查看详细错误信息
4. 在 GitHub 仓库提交 Issue
